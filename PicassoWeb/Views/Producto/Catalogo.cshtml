@model IEnumerable<PicassoWeb.Models.Categoria>
@{
    Layout = "~/Views/Shared/_Foundation.cshtml";
}
@{
    ViewBag.Title = "Catalogo";
}
<div class="row">
    <br />
</div>
<div class="row">
    <div class="large-11 columns">
        <h3>
            <img src="../../Images/Slider/gotas_picasso.png" class="alignleft" height="30" width="30" />
            <span class="titulosInfoPagina">COMO PODEMOS AYUDARLO</span>
        </h3>
        <div class="row">
            <!-- Side Bar -->
            <div class="large-4 columns centered">
                <div class="section-container accordion" data-section="accordion">
                    @foreach (var item in Model) {
                        <section>
                    <p class="title" data-section-title>
                        <!-- fpaz: parte de ajax que sirve para que cuando se haga click en la categoria se cargue el div de productos con los productos de esa categoria -->
                            @Ajax.ActionLink(@item.Nombre,
                                        "_ListadoProductos",
                                        new { prmCategoria = @item.Id },
                                        new AjaxOptions {
                                            HttpMethod = "POST",
                                            InsertionMode = InsertionMode.Replace,
                                            UpdateTargetId = "Productos",
                                            LoadingElementId = "ProductosLoad"
                                        }, 
                                        new { @id = "linkCategoria" + item.Id }
                                        )
                    </p>
                    
                    <div class="content" data-section-content>
                    </div>
                        </section>
                    }
                </div>
            </div>
            <!-- End Side Bar -->
            <!-- fpaz: seccion donde se van a cargar los productos de cada categoria-->
            <div class="large-8 columns centered">
                <!-- rsanch: elemento para mostrar que esta cargando -->
                <div class="row" id="ProductosLoad">
                Cargando...
                </div>
                <!-- fpaz: este es el div que se va a cargar con los productos -->
                <div class="row listadoProductos" id="Productos">
                </div>
            </div>
            <br />
            <!-- fpaz: Fin-->
        </div>
    </div>
</div>


<script type="text/javascript">
    //rsanhc : click al loadear la pagina en la primera categoria
    $(document).ready(function () {
        $("#linkCategoria1").trigger('click');
    });    
</script>