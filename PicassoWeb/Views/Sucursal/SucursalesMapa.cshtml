<style>
    /* rsanch contenedor flexible*/
    
    .Flexible-container
    {
        position: relative;
        padding-bottom: 100%;
        padding-top: 3px;
        height: 0;
        overflow: hidden;
    }
    
    .Flexible-container object, .Flexible-container embed
    {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
</style>
<div class="Flexible-container">
    <div id="map_canvas" style="width: 800px; height: 400px;">
    </div>
</div>
<script src="../../Scripts/Sucursales/jquery.ui.map.js" type="text/javascript"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">

    $('#map_canvas').gmap().bind('init', function () {
        $.getJSON('/Sucursal/mapasjson', function (data) {
            $.each(data, function (i, marker) {
                $('#map_canvas').gmap('addMarker', {
                    'position': new google.maps.LatLng(marker.lat, marker.lon),
                    'bounds': true
                }).click(function () {
                    $('#map_canvas').gmap('openInfoWindow', { 'content': marker.nombre }, this);
                });
            });
        });
    });

</script>
